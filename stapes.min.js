(function(){function a(){function j(a,c){var d=this.has(a);b[a]=c,this.emit("change",a),this.emit(d?"update":"create",a)}function i(b){a[b.type]||(a[b.type]=[]),a[b.type].push({handler:b.handler,scope:b.scope,type:b.type})}function h(a){return Array.prototype.slice.call(a,0)}function g(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=Math.random()*16|0,c=a=="x"?b:b&3|8;return c.toString(16)})}function f(a){return Object.prototype.toString.call(a)==="[object Array]"}function e(a,b){for(var c in a)b(a[c],c)}function d(a,b){return function(){return a.apply(b,arguments)}}var a={},b={},c=function(){};c.prototype={emit:function(b,c){c=c||null,e(b.split(" "),function(b){!a[b]||e(a[b],function(a){var b=a.scope?a.scope:this;a.scope=b,a.handler.call(a.scope,c,a)})})},extend:function(a,b){var d=b?a:c,e=b?b:a;for(var f in e){var g=e[f];b?d[f]=g:d.prototype[f]=g}},filter:function(a){var c=[];e(b,function(b){a(b)&&c.push(b)});return c},get:function(a){if(typeof a=="string")return this.has(a)?b[a]:null;if(typeof a=="function"){var c=this.filter(a);if(c.length)return c.length[0]}},getAll:function(){return b},has:function(a){return typeof b[a]!="undefined"},init:function(){this.emit("ready")},on:function(a,b,c){var d={},e;typeof a=="string"?(e=c||!1,d[a]=b):(e=b||!1,d=a);for(var f in d){var g=d[f],h=f.split(" ");for(var j=0,k=h.length;j<k;j++){var l=h[j];i({handler:g,scope:e,type:l})}}},remove:function(a){typeof a=="function"?e(b,d(function(c,d){a(c)&&(delete b[d],this.emit("delete change"))},this)):(typeof a=="string"&&(a=[a]),e(h(a),d(function(a){this.has(a)&&(delete b[a],this.emit("delete change"))},this)))},set:function(a,b){typeof b=="undefined"&&(b=a,b.id=a=g()),j.call(this,a,b)}};return new c}typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=a),exports.Stapes=a):typeof define=="function"&&define.amd?define(function(){return a}):window.Stapes=a})()